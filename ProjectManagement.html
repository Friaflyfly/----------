<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é¡¹ç›®ç®¡ç† - å¤©åˆçŸ­å‰§å‰ªè¾‘æ¥å•å¹³å°</title>
  
  <!-- Ant Design CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/antd@5.12.8/dist/reset.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/antd@5.12.8/dist/antd.min.css">
  
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    .appLayout {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: 200px;
      background: #fff;
      box-shadow: 2px 0 8px rgba(0, 0, 0, 0.06);
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      overflow-y: auto;
      z-index: 100;
    }

    .sidebarHeader {
      padding: 20px 16px;
      border-bottom: 1px solid #f0f0f0;
    }

    .logo {
      font-size: 18px;
      font-weight: 600;
      color: #1890ff;
      text-decoration: none;
      display: block;
    }

    .menu {
      padding: 16px 0;
    }

    .menuItem {
      display: block;
      padding: 12px 24px;
      color: #262626;
      text-decoration: none;
      font-size: 14px;
      transition: all 0.3s;
      border-left: 3px solid transparent;
    }

    .menuItem:hover {
      background-color: #f0f0f0;
      color: #1890ff;
    }

    .menuItem.active {
      background-color: #e6f7ff;
      color: #1890ff;
      border-left-color: #1890ff;
      font-weight: 500;
    }

    .menuItemIcon {
      margin-right: 8px;
      font-size: 16px;
    }

    .menuGroup {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid #f0f0f0;
    }

    .menuGroupTitle {
      padding: 8px 24px;
      font-size: 12px;
      color: #8c8c8c;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .mainContent {
      flex: 1;
      margin-left: 200px;
      min-height: 100vh;
      background: #f5f5f5;
    }

    .projectPage {
      padding: 24px;
    }

    .pageHeader {
      background: #fff;
      padding: 16px 24px;
      border-radius: 8px;
      margin-bottom: 16px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .filterCard {
      background: #fff;
      padding: 16px 24px;
      border-radius: 8px;
      margin-bottom: 16px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    .tableCard {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    @media (max-width: 768px) {
      .sidebar {
        display: none;
      }

      .mainContent {
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React & ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  
  <!-- Day.js -->
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
  
  <!-- Ant Design JS -->
  <script src="https://cdn.jsdelivr.net/npm/antd@5.12.8/dist/antd.min.js"></script>
  
  <!-- Babel Standalone for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect, useMemo, useCallback } = React;
    const { Card, Table, Button, Tag, Space, Select, Input, DatePicker, Typography, message, Popconfirm, Modal, Form, InputNumber } = antd;
    const { Title, Text } = Typography;
    const { Option } = Select;
    const { RangePicker } = DatePicker;
    const { Search } = Input;
    const { TextArea } = Input;

    const ProjectManagement = () => {
      const [projects, setProjects] = useState([]);
      const [loading, setLoading] = useState(false);
      const [filters, setFilters] = useState({
        status: '',
        city: '',
        projectStatusL1: '',
        projectStage: '',
        category: '',
        takeMode: '',
        difficulty: '',
        participantTeam: '',
        coordinator: '',
        dueTimeRange: null,
        search: '',
      });
      const [applicationModalVisible, setApplicationModalVisible] = useState(false);
      const [currentProject, setCurrentProject] = useState(null);
      const [applications, setApplications] = useState([]);
      const [rejectModalVisible, setRejectModalVisible] = useState(false);
      const [rejectingApp, setRejectingApp] = useState(null);
      const [rejectForm] = Form.useForm();
      const [approveModalVisible, setApproveModalVisible] = useState(false);
      const [approvingApp, setApprovingApp] = useState(null);

      useEffect(() => {
        loadProjects();
        ensureTestApplications();
      }, []);

      const loadProjects = () => {
        setLoading(true);
        let projectsData = JSON.parse(localStorage.getItem('adminProjects') || '[]');
        
        if (projectsData.length === 0) {
          projectsData = generateMockProjects();
          localStorage.setItem('adminProjects', JSON.stringify(projectsData));
        }

        setProjects(projectsData);
        setLoading(false);
      };

      const ensureTestApplications = () => {
        // ä¸º"æŠ¥å"æ¨¡å¼çš„é¡¹ç›®ç”Ÿæˆæµ‹è¯•ç”³è¯·æ•°æ®
        const projects = JSON.parse(localStorage.getItem('adminProjects') || '[]');
        const applicationProjects = projects.filter(p => p.takeMode === 'æŠ¥å');
        let applications = JSON.parse(localStorage.getItem('applications') || '[]');

        applicationProjects.forEach(project => {
          const existingApps = applications.filter(app => app.projectId === project.id);
          if (existingApps.length === 0) {
            // ä¸ºè¯¥æŠ¥åé¡¹ç›®ç”Ÿæˆ2-3ä¸ªæµ‹è¯•ç”³è¯·
            const testApplicants = ['å­¦å‘˜A', 'å­¦å‘˜B', 'å­¦å‘˜C'];
            const testCount = Math.floor(Math.random() * 2) + 2; // 2-3ä¸ª
            
            for (let i = 0; i < testCount; i++) {
              const statuses = ['Pending', 'Approved', 'Rejected'];
              const status = statuses[Math.floor(Math.random() * statuses.length)];
              const applyTime = dayjs().subtract(Math.floor(Math.random() * 7), 'day');
              
              const application = {
                id: `APP${project.id.slice(-3)}${String(i + 1).padStart(3, '0')}`,
                projectId: project.id,
                projectName: project.projectName,
                applicant: testApplicants[i],
                applyTime: applyTime.format('YYYY-MM-DD HH:mm:ss'),
                status: status,
              };

              if (status === 'Approved') {
                application.reviewer = 'è¿è¥A';
                application.reviewTime = applyTime.add(1, 'day').format('YYYY-MM-DD HH:mm:ss');
              } else if (status === 'Rejected') {
                application.reviewer = 'è¿è¥A';
                application.reviewTime = applyTime.add(1, 'day').format('YYYY-MM-DD HH:mm:ss');
                application.rejectReason = 'ä¸ç¬¦åˆé¡¹ç›®è¦æ±‚';
              }

              applications.push(application);
            }
          }
        });

        localStorage.setItem('applications', JSON.stringify(applications));
      };

      const generateMockProjects = () => {
        const categories = ['çŸ­å‰§', 'AIæ¼«å‰§', 'çŸ­è§†é¢‘', 'ç»¼è‰º'];
        const difficulties = ['ç²¾å“', 'å·¥å‚'];
        const teams = ['å®è®­', 'çº¿ä¸‹', 'çº¿ä¸Š'];
        const takeModes = ['æŠ¢å•', 'æŠ¥å'];
        const coordinators = ['å¼ ä¸‰', 'æå››', 'ç‹äº”'];
        const cities = ['é•¿æ²™', 'è¥¿å®‰'];
        const statusL1Options = ['åœ¨åˆ¶ä¸­', 'å·²äº¤ä»˜', 'å¾…è¿›'];
        const projectStages = ['ç²¾å‰ªä¸­', 'å†…éƒ¨ä¸€å®¡', 'å†…éƒ¨äºŒå®¡', 'å¯¼æ¼”å®¡', 'ç›‘åˆ¶å®¡', 'å¹³å°å®¡', 'å®¡æ ¸å®Œæˆ'];
        const statuses = ['Draft', 'Published', 'ClosedForTaking', 'Closed', 'Archived'];

        return Array.from({ length: 15 }, (_, i) => {
          const category = categories[i % categories.length];
          const status = statuses[Math.floor(Math.random() * statuses.length)];
          const quotaTotal = Math.floor(Math.random() * 10) + 5;
          const quotaTaken = Math.floor(Math.random() * quotaTotal);

          return {
            id: `proj_${String(i + 1).padStart(6, '0')}`,
            projectName: `${category}é¡¹ç›®${i + 1}`,
            category: category,
            city: cities[i % cities.length],
            projectStatusL1: statusL1Options[i % statusL1Options.length],
            projectStage: projectStages[i % projectStages.length],
            difficulty: difficulties[i % difficulties.length],
            participantTeam: teams[i % teams.length],
            takeMode: takeModes[i % takeModes.length],
            coordinator: coordinators[i % coordinators.length],
            status: status,
            unitPrice: Math.floor(Math.random() * 500) + 200,
            episodeCount: Math.floor(Math.random() * 20) + 10,
            quotaTotal: quotaTotal,
            quotaTaken: quotaTaken,
            dueTime: dayjs().add(Math.floor(Math.random() * 30), 'day').format('YYYY-MM-DD HH:mm:ss'),
            publishTime: dayjs().subtract(Math.floor(Math.random() * 30), 'day').format('YYYY-MM-DD HH:mm:ss'),
            orderStats: {
              inProgress: Math.floor(Math.random() * 5),
              submitted: Math.floor(Math.random() * 3),
              needRevision: Math.floor(Math.random() * 2),
              approved: Math.floor(Math.random() * 3),
              accepted: Math.floor(Math.random() * 5),
            },
            totalAmount: (Math.floor(Math.random() * 500) + 200) * (Math.floor(Math.random() * 20) + 10),
          };
        });
      };

      const filteredProjects = useMemo(() => {
        return projects.filter(project => {
          if (filters.status && project.status !== filters.status) return false;
          if (filters.city && (project.city || '') !== filters.city) return false;
          if (filters.projectStatusL1 && (project.projectStatusL1 || '') !== filters.projectStatusL1) return false;
          if (filters.projectStage && (project.projectStage || 'ç²¾å‰ªä¸­') !== filters.projectStage) return false;
          if (filters.category && project.category !== filters.category) return false;
          if (filters.takeMode && project.takeMode !== filters.takeMode) return false;
          if (filters.difficulty && project.difficulty !== filters.difficulty) return false;
          if (filters.participantTeam && project.participantTeam !== filters.participantTeam) return false;
          if (filters.coordinator && project.coordinator !== filters.coordinator) return false;
          if (filters.dueTimeRange && filters.dueTimeRange[0] && filters.dueTimeRange[1]) {
            const dueTime = dayjs(project.dueTime);
            if (dueTime.isBefore(filters.dueTimeRange[0]) || dueTime.isAfter(filters.dueTimeRange[1])) {
              return false;
            }
          }
          if (filters.search) {
            const searchLower = filters.search.toLowerCase();
            if (!project.id.toLowerCase().includes(searchLower) &&
                !project.projectName.toLowerCase().includes(searchLower)) {
              return false;
            }
          }
          return true;
        });
      }, [projects, filters]);

      const getStatusTag = (status) => {
        const statusMap = {
          'Draft': { color: 'default', text: 'è‰ç¨¿' },
          'Published': { color: 'green', text: 'å·²å‘å¸ƒ' },
          'ClosedForTaking': { color: 'orange', text: 'å·²æ»¡/å·²æˆªæ­¢' },
          'Closed': { color: 'red', text: 'å·²å…³é—­' },
          'Archived': { color: 'purple', text: 'å·²å½’æ¡£' },
        };
        const config = statusMap[status] || { color: 'default', text: status };
        return <Tag color={config.color}>{config.text}</Tag>;
      };

      const handleNewProject = () => {
        window.location.href = `ProjectEdit.html?mode=new`;
      };

      const handleEdit = (project) => {
        window.location.href = `ProjectEdit.html?id=${project.id}`;
      };

      const handleView = (project) => {
        window.location.href = `ProjectDetail.html?id=${project.id}`;
      };

      const handleViewApplications = (project) => {
        if (!project || !project.id) {
          message.error('é¡¹ç›®ä¿¡æ¯ä¸å®Œæ•´');
          return;
        }
        setCurrentProject(project);
        loadApplications(project.id);
        setApplicationModalVisible(true);
      };

      const handleEnterProjectSpace = (project) => {
        if (!project || !project.id) {
          message.error('é¡¹ç›®ä¿¡æ¯ä¸å®Œæ•´');
          return;
        }
        
        // æ ¹æ®ä¸šåŠ¡é€»è¾‘ï¼šä¸€ä¸ªé¡¹ç›®IDå¯¹åº”ä¸€ä¸ªé¡¹ç›®ç©ºé—´ï¼Œå¤šä¸ªè®¢å•å…±äº«ä¸€ä¸ªé¡¹ç›®ç©ºé—´
        // ç›´æ¥ä½¿ç”¨é¡¹ç›®IDè®¿é—®é¡¹ç›®ç©ºé—´ï¼Œä¸éœ€è¦æŸ¥æ‰¾è®¢å•
        const projectId = project.id;
        
        // æŸ¥æ‰¾è¯¥é¡¹ç›®ä¸‹çš„è®¢å•ï¼ˆç”¨äºè·å–ç¬¬ä¸€ä¸ªè®¢å•IDï¼Œå¦‚æœProjectSpaceéœ€è¦orderIdå‚æ•°ï¼‰
        const orders = JSON.parse(localStorage.getItem('currentOrders') || '[]');
        const projectOrders = orders.filter(order => 
          order.projectId === project.id || order.projectId === project.projectId
        );
        
        // å¦‚æœæœ‰è®¢å•ï¼Œä¼ é€’ç¬¬ä¸€ä¸ªè®¢å•IDï¼ˆç”¨äºå…¼å®¹ç°æœ‰å®ç°ï¼‰
        // å¦‚æœæ²¡æœ‰è®¢å•ï¼Œåªä¼ projectIdï¼ˆProjectSpaceéœ€è¦æ”¯æŒè¿™ç§æƒ…å†µï¼‰
        if (projectOrders.length > 0) {
          const firstOrder = projectOrders[0];
          const orderId = firstOrder.orderId || firstOrder.id;
          window.location.href = `ProjectSpace.html?orderId=${orderId}&projectId=${projectId}`;
        } else {
          // æ²¡æœ‰è®¢å•æ—¶ï¼Œåªä¼ projectIdï¼ˆéœ€è¦ProjectSpaceæ”¯æŒï¼‰
          window.location.href = `ProjectSpace.html?projectId=${projectId}`;
        }
      };

      const loadApplications = (projectId) => {
        try {
          const allApplications = JSON.parse(localStorage.getItem('applications') || '[]');
          const projectApplications = allApplications.filter(app => app && app.projectId === projectId);
          setApplications(projectApplications || []);
        } catch (error) {
          console.error('åŠ è½½ç”³è¯·æ•°æ®å¤±è´¥:', error);
          setApplications([]);
        }
      };

      const handleApproveConfirm = useCallback(() => {
        if (!currentProject || !approvingApp) {
          message.error('æ•°æ®ä¸å®Œæ•´');
          return;
        }

        try {
          // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨è¯¥ç”³è¯·äººçš„è®¢å•ï¼ˆé¿å…é‡å¤åˆ›å»ºï¼‰
          const orders = JSON.parse(localStorage.getItem('currentOrders') || '[]');
          const existingOrder = orders.find(order => 
            order.projectId === currentProject.id && order.taker === approvingApp.applicant
          );

          if (existingOrder) {
            message.warning('è¯¥ç”³è¯·äººå·²æœ‰è®¢å•ï¼Œæ— éœ€é‡å¤åˆ›å»º');
            // ä»ç„¶æ›´æ–°ç”³è¯·çŠ¶æ€
            const allApplications = JSON.parse(localStorage.getItem('applications') || '[]');
            const updatedApplications = allApplications.map(app => 
              app.id === approvingApp.id 
                ? { ...app, status: 'Approved', reviewer: 'å½“å‰è¿è¥', reviewTime: dayjs().format('YYYY-MM-DD HH:mm:ss'), rejectReason: null }
                : app
            );
            localStorage.setItem('applications', JSON.stringify(updatedApplications));
            
            setApproveModalVisible(false);
            setApprovingApp(null);
            setTimeout(() => {
              loadApplications(currentProject.id);
            }, 100);
            return;
          }

          // æ›´æ–°ç”³è¯·çŠ¶æ€ï¼ˆæ¸…é™¤é©³å›åŸå› ï¼‰
          const allApplications = JSON.parse(localStorage.getItem('applications') || '[]');
          const updatedApplications = allApplications.map(app => 
            app.id === approvingApp.id 
              ? { ...app, status: 'Approved', reviewer: 'å½“å‰è¿è¥', reviewTime: dayjs().format('YYYY-MM-DD HH:mm:ss'), rejectReason: null }
              : app
          );
          localStorage.setItem('applications', JSON.stringify(updatedApplications));

          // åˆ›å»ºè®¢å•
          const orderId = `ORD${String(Date.now()).slice(-6)}`;
          const newOrder = {
            id: orderId,
            orderId: orderId,
            projectId: currentProject.id,
            projectName: currentProject.projectName,
            taker: approvingApp.applicant,
            takerRole: approvingApp.takerRole || 'å‰ªè¾‘å¸ˆ',
            takeTime: dayjs().format('YYYY-MM-DD HH:mm:ss'),
            dueTime: currentProject.dueTime,
            status: 'InProgress',
            amount: currentProject.unitPrice * currentProject.episodeCount,
          };
          orders.push(newOrder);
          localStorage.setItem('currentOrders', JSON.stringify(orders));

          // æ›´æ–°é¡¹ç›®å·²æ¥å•æ•°
          const updatedProjects = projects.map(p => 
            p.id === currentProject.id 
              ? { ...p, quotaTaken: (p.quotaTaken || 0) + 1 }
              : p
          );
          setProjects(updatedProjects);
          localStorage.setItem('adminProjects', JSON.stringify(updatedProjects));

          // æ›´æ–°å½“å‰é¡¹ç›®æ•°æ®
          const updatedCurrentProject = {
            ...currentProject,
            quotaTaken: (currentProject.quotaTaken || 0) + 1
          };
          setCurrentProject(updatedCurrentProject);

          setApproveModalVisible(false);
          setApprovingApp(null);

          // å»¶è¿Ÿæ›´æ–°ç”³è¯·åˆ—è¡¨
          setTimeout(() => {
            if (currentProject && currentProject.id) {
              loadApplications(currentProject.id);
            }
          }, 300);

          message.success(`å·²é€šè¿‡ ${approvingApp.applicant} çš„ç”³è¯·ï¼Œè®¢å•å·²åˆ›å»º`);
        } catch (error) {
          console.error('å®¡æ ¸é€šè¿‡å¤±è´¥:', error);
          message.error('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
        }
      }, [currentProject, approvingApp, projects, setProjects, setCurrentProject, loadApplications]);

      const handleApproveApplication = useCallback((application) => {
        setApprovingApp(application);
        setApproveModalVisible(true);
      }, []);

      const handleRejectApplication = useCallback((application) => {
        setRejectingApp(application);
        setRejectModalVisible(true);
      }, []);

      const handleRejectConfirm = () => {
        rejectForm.validateFields().then(values => {
          if (!rejectingApp || !currentProject) {
            message.error('æ•°æ®ä¸å®Œæ•´');
            return;
          }

          try {
            const allApplications = JSON.parse(localStorage.getItem('applications') || '[]');
            const wasApproved = rejectingApp.status === 'Approved';
            
            // æ›´æ–°ç”³è¯·çŠ¶æ€
            const updatedApplications = allApplications.map(app => 
              app.id === rejectingApp.id 
                ? { 
                    ...app, 
                    status: 'Rejected', 
                    reviewer: 'å½“å‰è¿è¥', 
                    reviewTime: dayjs().format('YYYY-MM-DD HH:mm:ss'),
                    rejectReason: values.reason
                  }
                : app
            );
            localStorage.setItem('applications', JSON.stringify(updatedApplications));

            // å¦‚æœä¹‹å‰å·²é€šè¿‡ï¼Œéœ€è¦åˆ é™¤å·²åˆ›å»ºçš„è®¢å•å¹¶å‡å°‘å·²æ¥å•æ•°
            if (wasApproved) {
              // åˆ é™¤ç›¸å…³è®¢å•
              const orders = JSON.parse(localStorage.getItem('currentOrders') || '[]');
              const filteredOrders = orders.filter(order => {
                // åˆ é™¤è¯¥ç”³è¯·äººé’ˆå¯¹è¯¥é¡¹ç›®çš„è®¢å•
                return !(order.projectId === currentProject.id && order.taker === rejectingApp.applicant);
              });
              localStorage.setItem('currentOrders', JSON.stringify(filteredOrders));

              // å‡å°‘é¡¹ç›®å·²æ¥å•æ•°
              const updatedProjects = projects.map(p => 
                p.id === currentProject.id 
                  ? { ...p, quotaTaken: Math.max(0, (p.quotaTaken || 0) - 1) }
                  : p
              );
              setProjects(updatedProjects);
              localStorage.setItem('adminProjects', JSON.stringify(updatedProjects));

              // æ›´æ–°å½“å‰é¡¹ç›®æ•°æ®
              const updatedCurrentProject = {
                ...currentProject,
                quotaTaken: Math.max(0, (currentProject.quotaTaken || 0) - 1)
              };
              setCurrentProject(updatedCurrentProject);
            }

            // å»¶è¿Ÿæ›´æ–°ç”³è¯·åˆ—è¡¨
            setTimeout(() => {
              loadApplications(currentProject.id);
            }, 100);

            setRejectModalVisible(false);
            setRejectingApp(null);
            rejectForm.resetFields();
            message.success(wasApproved ? 'å·²æ’¤é”€é€šè¿‡å¹¶é©³å›ç”³è¯·ï¼Œç›¸å…³è®¢å•å·²åˆ é™¤' : 'å·²é©³å›ç”³è¯·');
          } catch (error) {
            console.error('é©³å›ç”³è¯·å¤±è´¥:', error);
            message.error('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•');
          }
        });
      };

      const handlePublish = (project) => {
        const updatedProjects = projects.map(p => 
          p.id === project.id ? { ...p, status: 'Published' } : p
        );
        setProjects(updatedProjects);
        localStorage.setItem('adminProjects', JSON.stringify(updatedProjects));
        message.success('é¡¹ç›®å·²å‘å¸ƒ');
      };

      const handleUnpublish = (project) => {
        const updatedProjects = projects.map(p => 
          p.id === project.id ? { ...p, status: 'Draft' } : p
        );
        setProjects(updatedProjects);
        localStorage.setItem('adminProjects', JSON.stringify(updatedProjects));
        message.success('é¡¹ç›®å·²ä¸‹æ¶');
      };

      const handleClose = (project) => {
        const updatedProjects = projects.map(p => 
          p.id === project.id ? { ...p, status: 'Closed' } : p
        );
        setProjects(updatedProjects);
        localStorage.setItem('adminProjects', JSON.stringify(updatedProjects));
        message.success('é¡¹ç›®å·²å…³é—­');
      };

      const handleArchive = (project) => {
        const updatedProjects = projects.map(p => 
          p.id === project.id ? { ...p, status: 'Archived' } : p
        );
        setProjects(updatedProjects);
        localStorage.setItem('adminProjects', JSON.stringify(updatedProjects));
        message.success('é¡¹ç›®å·²å½’æ¡£');
      };

      const handleExport = () => {
        message.success('å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­');
      };

      const columns = [
        {
          title: 'é¡¹ç›®ID',
          dataIndex: 'id',
          key: 'id',
          width: 120,
          fixed: 'left',
          render: (id, record) => {
            // é¡¹ç›®IDå§‹ç»ˆå¯ç‚¹å‡»ï¼Œå› ä¸ºé¡¹ç›®ç©ºé—´æ˜¯åŸºäºé¡¹ç›®IDçš„ï¼Œä¸ä¾èµ–è®¢å•
            return (
              <Button 
                type="link" 
                style={{ padding: 0, height: 'auto' }}
                onClick={(e) => {
                  e.stopPropagation();
                  handleEnterProjectSpace(record);
                }}
              >
                {id}
              </Button>
            );
          },
        },
        {
          title: 'é¡¹ç›®åç§°',
          dataIndex: 'projectName',
          key: 'projectName',
          width: 200,
          ellipsis: true,
        },
        {
          title: 'åˆ†ç±»',
          dataIndex: 'category',
          key: 'category',
          width: 100,
        },
        {
          title: 'åŸå¸‚',
          dataIndex: 'city',
          key: 'city',
          width: 80,
          render: (v) => v || '-',
        },
        {
          title: 'é¡¹ç›®çŠ¶å†µ',
          dataIndex: 'projectStatusL1',
          key: 'projectStatusL1',
          width: 90,
          render: (v) => v || '-',
        },
        {
          title: 'å•ä»·',
          dataIndex: 'unitPrice',
          key: 'unitPrice',
          width: 100,
          render: (price) => `Â¥${price}/é›†`,
        },
        {
          title: 'é›†æ•°',
          dataIndex: 'episodeCount',
          key: 'episodeCount',
          width: 80,
        },
        {
          title: 'æˆªæ­¢æ—¶é—´',
          dataIndex: 'dueTime',
          key: 'dueTime',
          width: 180,
        },
        {
          title: 'åé¢/å·²æ¥å•',
          key: 'quota',
          width: 120,
          render: (_, record) => `${record.quotaTaken}/${record.quotaTotal}`,
        },
        {
          title: 'çŠ¶æ€',
          dataIndex: 'status',
          key: 'status',
          width: 120,
          render: getStatusTag,
        },
        {
          title: 'é¡¹ç›®çŠ¶æ€(äºŒçº§)',
          dataIndex: 'projectStage',
          key: 'projectStage',
          width: 120,
          render: (val, record) => (
            <Select
              value={val || 'ç²¾å‰ªä¸­'}
              size="small"
              style={{ width: '100%', minWidth: 100 }}
              onChange={(v) => {
                const projects = JSON.parse(localStorage.getItem('adminProjects') || '[]');
                const next = projects.map(p => p.id === record.id ? { ...p, projectStage: v } : p);
                localStorage.setItem('adminProjects', JSON.stringify(next));
                setProjects(next);
                message.success('é¡¹ç›®çŠ¶æ€å·²æ›´æ–°');
              }}
              options={[
                { value: 'ç²¾å‰ªä¸­', label: 'ç²¾å‰ªä¸­' },
                { value: 'å†…éƒ¨ä¸€å®¡', label: 'å†…éƒ¨ä¸€å®¡' },
                { value: 'å†…éƒ¨äºŒå®¡', label: 'å†…éƒ¨äºŒå®¡' },
                { value: 'å¯¼æ¼”å®¡', label: 'å¯¼æ¼”å®¡' },
                { value: 'ç›‘åˆ¶å®¡', label: 'ç›‘åˆ¶å®¡' },
                { value: 'å¹³å°å®¡', label: 'å¹³å°å®¡' },
                { value: 'å®¡æ ¸å®Œæˆ', label: 'å®¡æ ¸å®Œæˆ' },
              ]}
            />
          ),
        },
        {
          title: 'è´Ÿè´£äºº',
          dataIndex: 'coordinator',
          key: 'coordinator',
          width: 100,
        },
        {
          title: 'è®¢å•ç»Ÿè®¡',
          key: 'orderStats',
          width: 200,
          render: (_, record) => {
            const stats = record.orderStats || {};
            return (
              <div>
                è¿›è¡Œä¸­:{stats.inProgress || 0} | å¾…å®¡æ ¸:{stats.submitted || 0} | 
                å¾…ä¿®æ”¹:{stats.needRevision || 0} | å¾…éªŒæ”¶:{stats.approved || 0} | 
                å·²éªŒæ”¶:{stats.accepted || 0}
                <br />
                <span style={{ color: '#52c41a', fontWeight: 600 }}>
                  è®¢å•é‡‘é¢: Â¥{record.totalAmount || 0}
                </span>
              </div>
            );
          },
        },
        {
          title: 'æ“ä½œ',
          key: 'action',
          width: 300,
          fixed: 'right',
          render: (_, record) => {
            const isArchived = record.status === 'Archived';
            const isApplicationMode = record.takeMode === 'æŠ¥å';
            return (
              <Space size="small">
                {isArchived ? (
                  // å·²å½’æ¡£çŠ¶æ€ï¼šåªæ˜¾ç¤ºæŸ¥çœ‹è¯¦æƒ…
                  <Button size="small" onClick={() => handleView(record)}>æŸ¥çœ‹è¯¦æƒ…</Button>
                ) : (
                  // æœªå½’æ¡£çŠ¶æ€ï¼šåªæ˜¾ç¤ºç¼–è¾‘è¯¦æƒ…ï¼Œä»¥åŠå…¶ä»–æ“ä½œæŒ‰é’®
                  <>
                    <Button size="small" onClick={() => handleEdit(record)}>ç¼–è¾‘è¯¦æƒ…</Button>
                    <Button 
                      size="small" 
                      type="link" 
                      onClick={() => handleEnterProjectSpace(record)}
                    >
                      ğŸš€ é¡¹ç›®ç©ºé—´
                    </Button>
                    {isApplicationMode && (
                      <Button size="small" type="link" onClick={() => handleViewApplications(record)}>
                        æŸ¥çœ‹ç”³è¯·
                      </Button>
                    )}
                    {record.status === 'Draft' && (
                      <Popconfirm title="ç¡®å®šå‘å¸ƒè¯¥é¡¹ç›®ï¼Ÿ" onConfirm={() => handlePublish(record)}>
                        <Button size="small" type="primary">å‘å¸ƒ</Button>
                      </Popconfirm>
                    )}
                    {record.status === 'Published' && (
                      <Popconfirm title="ç¡®å®šä¸‹æ¶è¯¥é¡¹ç›®ï¼Ÿ" onConfirm={() => handleUnpublish(record)}>
                        <Button size="small">ä¸‹æ¶</Button>
                      </Popconfirm>
                    )}
                    {['Published', 'ClosedForTaking'].includes(record.status) && (
                      <Popconfirm title="ç¡®å®šå…³é—­è¯¥é¡¹ç›®ï¼Ÿ" onConfirm={() => handleClose(record)}>
                        <Button size="small" danger>å…³é—­</Button>
                      </Popconfirm>
                    )}
                    {record.status === 'Closed' && (
                      <Popconfirm title="ç¡®å®šå½’æ¡£è¯¥é¡¹ç›®ï¼Ÿ" onConfirm={() => handleArchive(record)}>
                        <Button size="small">å½’æ¡£</Button>
                      </Popconfirm>
                    )}
                  </>
                )}
              </Space>
            );
          },
        },
      ];

      return (
        <div className="appLayout">
          {/* å·¦ä¾§å¯¼èˆªæ  */}
          <div className="sidebar">
            <div className="sidebarHeader">
              <a href="Home.html" className="logo">ğŸ¬ å¤©åˆçŸ­å‰§å¹³å°</a>
            </div>
            <nav className="menu">
              <a href="Home.html" className="menuItem">
                <span className="menuItemIcon">ğŸ </span>
                é¦–é¡µ
              </a>
              <a href="ProjectHall.html" className="menuItem">
                <span className="menuItemIcon">ğŸ“‹</span>
                æ¥å•å¤§å…
              </a>
              <a href="Leaderboard.html" className="menuItem">
                <span className="menuItemIcon">ğŸ†</span>
                å¤©æ¢¯æ¦œå•
              </a>
              <a href="Account.html" className="menuItem">
                <span className="menuItemIcon">ğŸ’°</span>
                è´¦æˆ·ä¸æ”¶ç›Š
              </a>
              <a href="MyProjects.html" className="menuItem">
                <span className="menuItemIcon">ğŸš€</span>
                æˆ‘çš„é¡¹ç›®
              </a>
              
              <div className="menuGroup">
                <div className="menuGroupTitle">åå°ç®¡ç†</div>
                <a href="ReviewQueue.html" className="menuItem">
                  <span className="menuItemIcon">âœ…</span>
                  ä»»åŠ¡å®¡æ ¸
                </a>
                <a href="ProjectManagement.html" className="menuItem active">
                  <span className="menuItemIcon">ğŸ“‹</span>
                  é¡¹ç›®ç®¡ç†
                </a>
                <a href="StudentManagement.html" className="menuItem">
                  <span className="menuItemIcon">ğŸ‘¥</span>
                  å­¦å‘˜ç®¡ç†
                </a>
                <a href="FinanceManagement.html" className="menuItem">
                  <span className="menuItemIcon">ğŸ’°</span>
                  è´¢åŠ¡å¯¹è´¦
                </a>
                <a href="DashboardManagement.html" className="menuItem" style={{ display: 'none' }}>
                  <span className="menuItemIcon">ğŸ“Š</span>
                  æ¦œå•ä¸æ•°æ®
                </a>
                <a href="DataBoard.html" className="menuItem">
                  <span className="menuItemIcon">ğŸ“ˆ</span>
                  æ•°æ®çœ‹æ¿
                </a>
              </div>
            </nav>
          </div>

          {/* ä¸»å†…å®¹åŒº */}
          <div className="mainContent">
            <div className="projectPage">
              <div className="pageHeader">
                <Title level={2} style={{ margin: 0 }}>é¡¹ç›®ç®¡ç†</Title>
                <Space>
                  <Button onClick={handleExport}>å¯¼å‡º</Button>
                  <Button type="primary" onClick={handleNewProject}>æ–°å»ºé¡¹ç›®</Button>
                </Space>
              </div>

              {/* ç­›é€‰åŒº */}
              <div className="filterCard">
                <Space size="middle" wrap>
                  <span>çŠ¶æ€ï¼š</span>
                  <Select
                    style={{ width: 120 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.status}
                    onChange={(value) => setFilters({ ...filters, status: value || '' })}
                  >
                    <Option value="Draft">è‰ç¨¿</Option>
                    <Option value="Published">å·²å‘å¸ƒ</Option>
                    <Option value="ClosedForTaking">å·²æ»¡/å·²æˆªæ­¢</Option>
                    <Option value="Closed">å·²å…³é—­</Option>
                    <Option value="Archived">å·²å½’æ¡£</Option>
                  </Select>

                  <span>åŸå¸‚ï¼š</span>
                  <Select
                    style={{ width: 100 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.city}
                    onChange={(value) => setFilters({ ...filters, city: value || '' })}
                  >
                    <Option value="é•¿æ²™">é•¿æ²™</Option>
                    <Option value="è¥¿å®‰">è¥¿å®‰</Option>
                  </Select>

                  <span>é¡¹ç›®çŠ¶å†µï¼š</span>
                  <Select
                    style={{ width: 100 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.projectStatusL1}
                    onChange={(value) => setFilters({ ...filters, projectStatusL1: value || '' })}
                  >
                    <Option value="åœ¨åˆ¶ä¸­">åœ¨åˆ¶ä¸­</Option>
                    <Option value="å·²äº¤ä»˜">å·²äº¤ä»˜</Option>
                    <Option value="å¾…è¿›">å¾…è¿›</Option>
                  </Select>

                  <span>é¡¹ç›®çŠ¶æ€(äºŒçº§)ï¼š</span>
                  <Select
                    style={{ width: 120 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.projectStage}
                    onChange={(value) => setFilters({ ...filters, projectStage: value || '' })}
                  >
                    <Option value="ç²¾å‰ªä¸­">ç²¾å‰ªä¸­</Option>
                    <Option value="å†…éƒ¨ä¸€å®¡">å†…éƒ¨ä¸€å®¡</Option>
                    <Option value="å†…éƒ¨äºŒå®¡">å†…éƒ¨äºŒå®¡</Option>
                    <Option value="å¯¼æ¼”å®¡">å¯¼æ¼”å®¡</Option>
                    <Option value="ç›‘åˆ¶å®¡">ç›‘åˆ¶å®¡</Option>
                    <Option value="å¹³å°å®¡">å¹³å°å®¡</Option>
                    <Option value="å®¡æ ¸å®Œæˆ">å®¡æ ¸å®Œæˆ</Option>
                  </Select>

                  <span>åˆ†ç±»ï¼š</span>
                  <Select
                    style={{ width: 120 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.category}
                    onChange={(value) => setFilters({ ...filters, category: value || '' })}
                  >
                    <Option value="çŸ­å‰§">çŸ­å‰§</Option>
                    <Option value="AIæ¼«å‰§">AIæ¼«å‰§</Option>
                    <Option value="çŸ­è§†é¢‘">çŸ­è§†é¢‘</Option>
                    <Option value="ç»¼è‰º">ç»¼è‰º</Option>
                  </Select>

                  <span>æ¥å•æ¨¡å¼ï¼š</span>
                  <Select
                    style={{ width: 120 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.takeMode}
                    onChange={(value) => setFilters({ ...filters, takeMode: value || '' })}
                  >
                    <Option value="æŠ¢å•">æŠ¢å•</Option>
                    <Option value="æŠ¥å">æŠ¥å</Option>
                  </Select>

                  <span>éš¾åº¦ï¼š</span>
                  <Select
                    style={{ width: 120 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.difficulty}
                    onChange={(value) => setFilters({ ...filters, difficulty: value || '' })}
                  >
                    <Option value="ç²¾å“">ç²¾å“</Option>
                    <Option value="å·¥å‚">å·¥å‚</Option>
                  </Select>

                  <span>å‚ä¸å›¢é˜Ÿï¼š</span>
                  <Select
                    style={{ width: 120 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.participantTeam}
                    onChange={(value) => setFilters({ ...filters, participantTeam: value || '' })}
                  >
                    <Option value="å®è®­">å®è®­</Option>
                    <Option value="çº¿ä¸‹">çº¿ä¸‹</Option>
                    <Option value="çº¿ä¸Š">çº¿ä¸Š</Option>
                  </Select>

                  <span>è´Ÿè´£äººï¼š</span>
                  <Select
                    style={{ width: 120 }}
                    placeholder="å…¨éƒ¨"
                    allowClear
                    value={filters.coordinator}
                    onChange={(value) => setFilters({ ...filters, coordinator: value || '' })}
                  >
                    <Option value="å¼ ä¸‰">å¼ ä¸‰</Option>
                    <Option value="æå››">æå››</Option>
                    <Option value="ç‹äº”">ç‹äº”</Option>
                  </Select>

                  <span>é¡¹ç›®æˆªæ­¢æ—¶é—´ï¼š</span>
                  <RangePicker
                    value={filters.dueTimeRange}
                    onChange={(dates) => setFilters({ ...filters, dueTimeRange: dates })}
                  />

                  <Search
                    placeholder="æœç´¢é¡¹ç›®ID/åç§°"
                    style={{ width: 200 }}
                    allowClear
                    value={filters.search}
                    onChange={(e) => setFilters({ ...filters, search: e.target.value })}
                    onSearch={(value) => setFilters({ ...filters, search: value })}
                  />
                </Space>
              </div>

              {/* è¡¨æ ¼ */}
              <div className="tableCard">
                <Table
                  columns={columns}
                  dataSource={filteredProjects}
                  loading={loading}
                  rowKey="id"
                  scroll={{ x: 1600 }}
                  pagination={{
                    pageSize: 20,
                    showSizeChanger: true,
                    showTotal: (total) => `å…± ${total} æ¡`,
                  }}
                />
              </div>
            </div>
          </div>

          {/* ç”³è¯·åˆ—è¡¨å¼¹çª— */}
          <Modal
            title={`é¡¹ç›®ç”³è¯·åˆ—è¡¨ - ${currentProject?.projectName || ''}`}
            open={applicationModalVisible}
            onCancel={() => {
              setApplicationModalVisible(false);
              setCurrentProject(null);
              setApplications([]);
            }}
            footer={null}
            width={900}
          >
            {currentProject && (
              <div style={{ marginBottom: 16 }}>
                <Space direction="vertical" style={{ width: '100%' }}>
                  <div>
                    <Text strong>é¡¹ç›®ä¿¡æ¯ï¼š</Text>
                    <Space style={{ marginLeft: 8 }}>
                      <Tag>æ¥å•æ¨¡å¼ï¼š{currentProject.takeMode}</Tag>
                      <Tag>åé¢ï¼š{currentProject.quotaTotal}äºº</Tag>
                      <Tag>å·²æ¥å•ï¼š{currentProject.quotaTaken}/{currentProject.quotaTotal}</Tag>
                    </Space>
                  </div>
                  {currentProject.candidates && Array.isArray(currentProject.candidates) && currentProject.candidates.length > 0 && (
                    <div>
                      <Text strong>æŒ‡å®šå€™é€‰äººï¼š</Text>
                      <Space style={{ marginLeft: 8 }}>
                        {currentProject.candidates.map((candidate, idx) => {
                          const candidateName = candidate && typeof candidate === 'object' ? candidate.name : candidate;
                          return <Tag key={idx} color="blue">{candidateName || `å€™é€‰äºº${idx + 1}`}</Tag>;
                        })}
                      </Space>
                    </div>
                  )}
                </Space>
              </div>
            )}

            <Table
              columns={useMemo(() => [
                { title: 'ç”³è¯·å•å·', dataIndex: 'id', key: 'id', width: 120 },
                { title: 'ç”³è¯·äºº', dataIndex: 'applicant', key: 'applicant', width: 120 },
                { title: 'ç”³è¯·æ—¶é—´', dataIndex: 'applyTime', key: 'applyTime', width: 180 },
                {
                  title: 'çŠ¶æ€',
                  dataIndex: 'status',
                  key: 'status',
                  width: 120,
                  render: (status) => {
                    const statusMap = {
                      'Pending': { color: 'orange', text: 'å¾…å®¡æ ¸' },
                      'Approved': { color: 'green', text: 'å·²é€šè¿‡' },
                      'Rejected': { color: 'red', text: 'å·²é©³å›' },
                      'Cancelled': { color: 'default', text: 'å·²å–æ¶ˆ' },
                    };
                    const config = statusMap[status] || { color: 'default', text: status };
                    return <Tag color={config.color}>{config.text}</Tag>;
                  },
                },
                {
                  title: 'å®¡æ ¸äºº',
                  dataIndex: 'reviewer',
                  key: 'reviewer',
                  width: 120,
                  render: (reviewer) => reviewer || '-',
                },
                {
                  title: 'å®¡æ ¸æ—¶é—´',
                  dataIndex: 'reviewTime',
                  key: 'reviewTime',
                  width: 180,
                  render: (time) => time || '-',
                },
                {
                  title: 'é©³å›åŸå› ',
                  dataIndex: 'rejectReason',
                  key: 'rejectReason',
                  width: 200,
                  render: (reason) => reason || '-',
                },
                {
                  title: 'æ“ä½œ',
                  key: 'action',
                  width: 150,
                  render: (_, record) => {
                    // å¾…å®¡æ ¸çŠ¶æ€ï¼šæ˜¾ç¤ºé€šè¿‡å’Œé©³å›æŒ‰é’®
                    if (record.status === 'Pending') {
                      return (
                        <Space size="small" key={`action-${record.id}`}>
                          <Button 
                            size="small" 
                            type="primary"
                            onClick={(e) => {
                              e.stopPropagation();
                              handleApproveApplication(record);
                            }}
                          >
                            é€šè¿‡
                          </Button>
                          <Button 
                            size="small" 
                            danger 
                            type="default"
                            onClick={(e) => {
                              if (e) {
                                e.preventDefault();
                                e.stopPropagation();
                              }
                              if (handleRejectApplication) {
                                handleRejectApplication(record);
                              }
                            }}
                            style={{ cursor: 'pointer' }}
                          >
                            é©³å›
                          </Button>
                        </Space>
                      );
                    }
                    // å·²é€šè¿‡çŠ¶æ€ï¼šæ˜¾ç¤ºé©³å›æŒ‰é’®ï¼ˆå…è®¸æ’¤é”€é€šè¿‡ï¼‰
                    if (record.status === 'Approved') {
                      return (
                        <Space size="small" key={`action-${record.id}`}>
                          <Button 
                            size="small" 
                            danger
                            type="default"
                            onClick={(e) => {
                              if (e) {
                                e.preventDefault();
                                e.stopPropagation();
                              }
                              if (handleRejectApplication) {
                                handleRejectApplication(record);
                              }
                            }}
                            style={{ cursor: 'pointer' }}
                          >
                            é©³å›
                          </Button>
                        </Space>
                      );
                    }
                    // å·²é©³å›çŠ¶æ€ï¼šæ˜¾ç¤ºé€šè¿‡æŒ‰é’®ï¼ˆå…è®¸é‡æ–°é€šè¿‡ï¼‰
                    if (record.status === 'Rejected') {
                      return (
                        <Space size="small" key={`action-${record.id}`}>
                          <Button 
                            size="small" 
                            type="primary"
                            onClick={(e) => {
                              e.stopPropagation();
                              handleApproveApplication(record);
                            }}
                          >
                            é€šè¿‡
                          </Button>
                        </Space>
                      );
                    }
                    // å…¶ä»–çŠ¶æ€ï¼ˆå·²å–æ¶ˆï¼‰ï¼šä¸æ˜¾ç¤ºæ“ä½œæŒ‰é’®
                    return '-';
                  },
                },
              ], [handleApproveApplication, handleRejectApplication])}
              dataSource={applications}
              rowKey="id"
              pagination={{ pageSize: 10, showTotal: (total) => `å…± ${total} æ¡` }}
            />
          </Modal>

          {/* é€šè¿‡ç¡®è®¤å¼¹çª— */}
          <Modal
            title="é€šè¿‡ç”³è¯·"
            open={approveModalVisible}
            onOk={handleApproveConfirm}
            onCancel={() => {
              setApproveModalVisible(false);
              setApprovingApp(null);
            }}
            okText="ç¡®è®¤é€šè¿‡"
            cancelText="å–æ¶ˆ"
            destroyOnClose
          >
            <div>
              <p>ç¡®å®šé€šè¿‡è¯¥ç”³è¯·ï¼Ÿé€šè¿‡åå°†è‡ªåŠ¨åˆ›å»ºè®¢å•ã€‚</p>
              {approvingApp && (
                <p style={{ marginTop: 8, color: '#8c8c8c', fontSize: 12 }}>
                  ç”³è¯·äººï¼š{approvingApp.applicant}
                </p>
              )}
            </div>
          </Modal>

          {/* é©³å›åŸå› å¼¹çª— */}
          <Modal
            title={rejectingApp && rejectingApp.status === 'Approved' ? 'é©³å›ç”³è¯·ï¼ˆå°†åˆ é™¤å·²åˆ›å»ºçš„è®¢å•ï¼‰' : 'é©³å›ç”³è¯·'}
            open={rejectModalVisible}
            onOk={handleRejectConfirm}
            onCancel={() => {
              setRejectModalVisible(false);
              setRejectingApp(null);
              rejectForm.resetFields();
            }}
            okText="ç¡®è®¤é©³å›"
            cancelText="å–æ¶ˆ"
            destroyOnClose
          >
            <Form form={rejectForm} layout="vertical">
              <Form.Item
                name="reason"
                label="é©³å›åŸå› "
                rules={[{ required: true, message: 'è¯·è¾“å…¥é©³å›åŸå› ' }]}
              >
                <TextArea rows={4} placeholder="è¯·å¡«å†™é©³å›åŸå› ï¼Œè¯¥åŸå› å°†é€šçŸ¥ç”³è¯·äºº" />
              </Form.Item>
            </Form>
          </Modal>
        </div>
      );
    };

    // ç­‰å¾…æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆåå†æ¸²æŸ“
    window.addEventListener('load', function() {
      try {
        ReactDOM.render(<ProjectManagement />, document.getElementById('root'));
      } catch (error) {
        console.error('æ¸²æŸ“é”™è¯¯:', error);
        document.getElementById('root').innerHTML = '<div style="padding: 20px; color: red;">é¡µé¢åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ã€‚</div>';
      }
    });
  </script>
</body>
</html>
